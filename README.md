# Image-Mesh: æ™¶ä½“ç»“æ„å¯è§†åŒ–ä¸åˆ†æå·¥å…·

ä¸€ä¸ªåŸºäº Electron + Vue 3 + Three.js çš„æ¡Œé¢åº”ç”¨ç¨‹åºï¼Œä¸“é—¨ç”¨äº CIF (Crystallographic Information File) æ–‡ä»¶çš„è§£æã€å¯è§†åŒ–å’Œåˆ†æã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ§ª æ ¸å¿ƒåŠŸèƒ½
- **CIF æ–‡ä»¶è§£æ**: æ”¯æŒæ ‡å‡† CIF æ ¼å¼æ–‡ä»¶çš„è§£æå’Œæ•°æ®æå–
- **3D ç»“æ„å¯è§†åŒ–**: åŸºäº Three.js çš„äº¤äº’å¼ 3D åˆ†å­ç»“æ„æ˜¾ç¤º
- **åŸå­å’ŒåŒ–å­¦é”®æ¸²æŸ“**: æ”¯æŒä¸åŒå…ƒç´ çš„åŸå­çƒä½“å’ŒåŒ–å­¦é”®çš„å¯è§†åŒ–
- **æ–‡ä»¶ç®¡ç†**: æ”¯æŒ CIF å’Œ TIFF æ–‡ä»¶çš„æ‰¹é‡ä¸Šä¼ å’Œç®¡ç†
- **æ•°æ®åº“å­˜å‚¨**: æœ¬åœ° SQLite æ•°æ®åº“å­˜å‚¨é¡¹ç›®å’Œåˆ†ææ•°æ®

### ğŸ¨ å¯è§†åŒ–ç‰¹æ€§
- **å®æ—¶æ¸²æŸ“**: é«˜æ€§èƒ½çš„ 3D æ¸²æŸ“å¼•æ“
- **äº¤äº’æ§åˆ¶**: é¼ æ ‡æ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»æ“ä½œ
- **å…ƒç´ è¿‡æ»¤**: å¯é€‰æ‹©æ˜¾ç¤º/éšè—ç‰¹å®šå…ƒç´ 
- **è§†è§’æ§åˆ¶**: æ”¯æŒé‡ç½®è§†è§’å’Œè‡ªé€‚åº”æ˜¾ç¤º
- **å¯¼å‡ºåŠŸèƒ½**: æ”¯æŒå›¾åƒå¯¼å‡ºå’Œæ•°æ®å¯¼å‡º

### ğŸ“Š åˆ†æåŠŸèƒ½
- **æ™¶ä½“å‚æ•°è§£æ**: è‡ªåŠ¨æå–æ™¶èƒå‚æ•°å’Œç©ºé—´ç¾¤ä¿¡æ¯
- **åŸå­åæ ‡åˆ†æ**: ç²¾ç¡®çš„åŸå­ä½ç½®å’Œåæ ‡ä¿¡æ¯
- **æ•°æ®éªŒè¯**: å®Œæ•´çš„æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†æœºåˆ¶

## ç³»ç»Ÿè¦æ±‚

### å¼€å‘ç¯å¢ƒ
- **Node.js**: >= 16.0.0
- **pnpm**: >= 9.6.0
- **Python**: >= 3.8 (ç”¨äºæŸäº›åŸç”Ÿæ¨¡å—ç¼–è¯‘)

### è¿è¡Œç¯å¢ƒ
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.14+, Linux (Ubuntu 18.04+)
- **å†…å­˜**: æœ€å°‘ 4GB RAMï¼Œæ¨è 8GB+
- **æ˜¾å¡**: æ”¯æŒ OpenGL 3.3+ çš„æ˜¾å¡

## å®‰è£…å’Œè¿è¡Œ

### ğŸš€ å¿«é€Ÿå®‰è£…ï¼ˆæ¨èï¼‰

#### æ–¹å¼ä¸€ï¼šä¸€é”®å®‰å…¨å®‰è£…
```bash
git clone <repository-url>
cd image-mesh
npm run install:safe
```

#### æ–¹å¼äºŒï¼šå®Œæ•´é¡¹ç›®è®¾ç½®
```bash
git clone <repository-url>
cd image-mesh
npm run setup:project
```

### ğŸ“¦ ä¼ ç»Ÿå®‰è£…æ–¹å¼

#### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd image-mesh
```

#### 2. å®‰è£…ä¾èµ–
```bash
# æ¨èä½¿ç”¨å®‰å…¨å®‰è£…è„šæœ¬
npm run install:safe

# æˆ–ä¼ ç»Ÿæ–¹å¼ï¼ˆå¯èƒ½é‡åˆ° better-sqlite3 ç¼–è¯‘é—®é¢˜ï¼‰
npm install
```

#### 3. å¼€å‘æ¨¡å¼è¿è¡Œ
```bash
# å¯åŠ¨ Vite å¼€å‘æœåŠ¡å™¨
npm run dev:vite

# åœ¨æ–°ç»ˆç«¯ä¸­å¯åŠ¨ Electron åº”ç”¨
npm run dev:electron

# æˆ–ä½¿ç”¨ä¸€ä½“åŒ–å¯åŠ¨å‘½ä»¤
npm run dev
```

#### 4. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
# æ„å»ºå‰ç«¯èµ„æº
npm run build

# æ„å»º Electron åº”ç”¨
npm run build:electron

# æˆ–æ„å»ºæ‰€æœ‰å¹³å°
npm run build:win    # Windows
npm run build:mac    # macOS
npm run build:linux  # Linux
```

### âš ï¸ å®‰è£…é—®é¢˜è§£å†³

å¦‚æœé‡åˆ° `better-sqlite3` ç¼–è¯‘é”™è¯¯ï¼š

#### Windows ç¯å¢ƒ
```bash
# ä½¿ç”¨æˆ‘ä»¬æä¾›çš„è§£å†³æ–¹æ¡ˆ
npm run rebuild:native:windows

# æˆ–æ‰‹åŠ¨æ‰§è¡Œ
set GYP_MSVS_VERSION=2019 && pnpm dlx electron-rebuild --force
```

#### æ‰€æœ‰ç¯å¢ƒ
```bash
# æŸ¥çœ‹è¯¦ç»†æ•…éšœæ’é™¤æŒ‡å—
cat docs/TROUBLESHOOTING.md

# æŸ¥çœ‹å¿«é€Ÿå®‰è£…æŒ‡å—
cat docs/QUICK_INSTALL.md
```

### ğŸ”§ å¯ç”¨è„šæœ¬å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | æ¨èåœºæ™¯ |
|------|------|----------|
| `install:safe` | å®‰å…¨å®‰è£…ä¾èµ– | é¦–æ¬¡å®‰è£… |
| `install:full` | å®Œæ•´å®‰è£…+é‡å»º | éœ€è¦åŸç”Ÿæ€§èƒ½ |
| `setup:project` | é¡¹ç›®å®Œæ•´è®¾ç½® | æ–°é¡¹ç›®å…‹éš† |
| `rebuild:native` | é‡å»ºåŸç”Ÿæ¨¡å— | æ›´æ–°å |
| `rebuild:native:windows` | Windows ä¸“ç”¨é‡å»º | Windows é—®é¢˜ |
| `clean` | æ¸…ç† npm ç¼“å­˜ã€node_modules å’Œ package-lock.json | è§£å†³ä¾èµ–é—®é¢˜ |

> ğŸ’¡ **æç¤º**: å¦‚æœä¸ç†Ÿæ‚‰åŸç”Ÿæ¨¡å—ç¼–è¯‘é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨ `npm run install:safe` è¿›è¡Œå®‰è£…ã€‚

## é¡¹ç›®ç»“æ„

```
image-mesh/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ backend/                 # Electron ä¸»è¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ database/           # æ•°æ®åº“ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ services/           # åç«¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ main.ts             # Electron ä¸»å…¥å£
â”‚   â”œâ”€â”€ components/             # Vue ç»„ä»¶
â”‚   â”œâ”€â”€ router/                 # Vue Router è·¯ç”±
â”‚   â”œâ”€â”€ services/               # å‰ç«¯æœåŠ¡å±‚
â”‚   â”œâ”€â”€ stores/                 # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ types/                  # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ cifParser.ts        # CIF æ–‡ä»¶è§£æå™¨
â”‚   â”‚   â””â”€â”€ structureVisualizer.ts # 3D å¯è§†åŒ–å·¥å…·
â”‚   â”œâ”€â”€ views/                  # Vue é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FileUpload.vue      # æ–‡ä»¶ä¸Šä¼ é¡µé¢
â”‚   â”‚   â”œâ”€â”€ StructureVisualization.vue # ç»“æ„å¯è§†åŒ–é¡µé¢
â”‚   â”‚   â””â”€â”€ ProjectManagement.vue # é¡¹ç›®ç®¡ç†é¡µé¢
â”‚   â”œâ”€â”€ App.vue                 # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts                 # Vue åº”ç”¨å…¥å£
â”œâ”€â”€ public/                     # é™æ€èµ„æº
â”œâ”€â”€ dist/                       # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ electron-builder.json       # Electron æ‰“åŒ…é…ç½®
â”œâ”€â”€ package.json               # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json              # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts             # Vite é…ç½®
â””â”€â”€ README.md                  # é¡¹ç›®æ–‡æ¡£
```

## ä½¿ç”¨æŒ‡å—

### 1. å¯åŠ¨åº”ç”¨
æŒ‰ç…§ä¸Šè¿°å®‰è£…æ­¥éª¤å¯åŠ¨åº”ç”¨åï¼Œæ‚¨å°†çœ‹åˆ°ä¸»ç•Œé¢ã€‚

### 2. æ–‡ä»¶ä¸Šä¼ 
1. ç‚¹å‡»"æ–‡ä»¶ä¸Šä¼ "æ ‡ç­¾é¡µ
2. ç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"æŒ‰é’®
3. é€‰æ‹© CIF æˆ– TIFF æ–‡ä»¶ï¼ˆæ”¯æŒå¤šé€‰ï¼‰
4. æ–‡ä»¶å°†è‡ªåŠ¨è§£æå¹¶æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­

### 3. ç»“æ„å¯è§†åŒ–
1. ä¸Šä¼  CIF æ–‡ä»¶åï¼Œåˆ‡æ¢åˆ°"ç»“æ„å¯è§†åŒ–"æ ‡ç­¾é¡µ
2. é€‰æ‹©è¦å¯è§†åŒ–çš„é¡¹ç›®
3. ä½¿ç”¨é¼ æ ‡æ§åˆ¶ 3D è§†å›¾ï¼š
   - **å·¦é”®æ‹–æ‹½**: æ—‹è½¬è§†è§’
   - **å³é”®æ‹–æ‹½**: å¹³ç§»è§†å›¾
   - **æ»šè½®**: ç¼©æ”¾è§†å›¾
4. ä½¿ç”¨æ§åˆ¶é¢æ¿è°ƒæ•´æ˜¾ç¤ºé€‰é¡¹

### 4. é¡¹ç›®ç®¡ç†
1. åœ¨"é¡¹ç›®ç®¡ç†"æ ‡ç­¾é¡µæŸ¥çœ‹æ‰€æœ‰é¡¹ç›®
2. å¯ä»¥ç¼–è¾‘é¡¹ç›®ä¿¡æ¯ã€åˆ é™¤é¡¹ç›®
3. æŸ¥çœ‹é¡¹ç›®çš„åˆ†æè®°å½•

## CIF æ–‡ä»¶æ ¼å¼æ”¯æŒ

### æ”¯æŒçš„æ•°æ®å—
- **_cell_length_a, _cell_length_b, _cell_length_c**: æ™¶èƒå‚æ•°
- **_cell_angle_alpha, _cell_angle_beta, _cell_angle_gamma**: æ™¶èƒè§’åº¦
- **_symmetry_space_group_name_H-M**: ç©ºé—´ç¾¤åç§°
- **åŸå­åæ ‡**: æ”¯æŒåˆ†æ•°åæ ‡å’Œç¬›å¡å°”åæ ‡
- **åŸå­ä¿¡æ¯**: å…ƒç´ ç±»å‹ã€å ä½ç‡ã€æ¸©åº¦å› å­ç­‰

### ç¤ºä¾‹ CIF æ–‡ä»¶æ ¼å¼
``cif
data_example
_cell_length_a    5.43
_cell_length_b    5.43
_cell_length_c    5.43
_cell_angle_alpha 90.0
_cell_angle_beta  90.0
_cell_angle_gamma 90.0
_symmetry_space_group_name_H-M 'P 1'

loop_
_atom_site_label
_atom_site_type_symbol
_atom_site_fract_x
_atom_site_fract_y
_atom_site_fract_z
Si1 Si 0.0 0.0 0.0
Si2 Si 0.25 0.25 0.25
```

## æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ
- **Vue 3**: å“åº”å¼ UI æ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„ JavaScript
- **Vite**: å¿«é€Ÿæ„å»ºå·¥å…·
- **Three.js**: 3D å›¾å½¢æ¸²æŸ“åº“
- **Element Plus**: UI ç»„ä»¶åº“
- **Pinia**: çŠ¶æ€ç®¡ç†
- **Vue Router**: è·¯ç”±ç®¡ç†

### åç«¯æŠ€æœ¯æ ˆ
- **Electron**: è·¨å¹³å°æ¡Œé¢åº”ç”¨æ¡†æ¶
- **SQLite**: æœ¬åœ°æ•°æ®åº“
- **better-sqlite3**: SQLite Node.js é©±åŠ¨

### å¼€å‘å·¥å…·
- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–
- **Electron Builder**: åº”ç”¨æ‰“åŒ…å·¥å…·

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½
1. åœ¨ `src/views/` ä¸­åˆ›å»ºæ–°çš„ Vue ç»„ä»¶
2. åœ¨ `src/router/` ä¸­æ·»åŠ è·¯ç”±é…ç½®
3. å¦‚éœ€çŠ¶æ€ç®¡ç†ï¼Œåœ¨ `src/stores/` ä¸­åˆ›å»º Pinia store
4. å¦‚éœ€åç«¯ APIï¼Œåœ¨ `src/backend/services/` ä¸­æ·»åŠ æœåŠ¡

### æ•°æ®åº“æ“ä½œ
```typescript
import { DatabaseService } from './src/services/databaseService'

const dbService = new DatabaseService()

// åˆ›å»ºé¡¹ç›®
const projectId = await dbService.createProject({
  name: 'æ–°é¡¹ç›®',
  description: 'é¡¹ç›®æè¿°',
  cif_file_path: '/path/to/file.cif'
})

// è·å–é¡¹ç›®
const project = await dbService.getProject(projectId)
```

### CIF è§£æ
```typescript
import { CifParser } from './src/utils/cifParser'

const parser = new CifParser()
const cifData = parser.parse(fileContent)

console.log(cifData.atoms) // åŸå­æ•°æ®
console.log(cifData.cell)  // æ™¶èƒå‚æ•°
```

### 3D å¯è§†åŒ–
```typescript
import { StructureVisualizer } from './src/utils/structureVisualizer'

const visualizer = new StructureVisualizer(container)
visualizer.loadStructure(cifData)
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. åº”ç”¨å¯åŠ¨å¤±è´¥
- æ£€æŸ¥ Node.js ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
- ç¡®ä¿æ‰€æœ‰ä¾èµ–å·²æ­£ç¡®å®‰è£…
- æ£€æŸ¥ç«¯å£ 5173 æ˜¯å¦è¢«å ç”¨

#### 2. CIF æ–‡ä»¶è§£æå¤±è´¥
- ç¡®ä¿æ–‡ä»¶æ ¼å¼æ­£ç¡®
- æ£€æŸ¥æ–‡ä»¶ç¼–ç ï¼ˆå»ºè®®ä½¿ç”¨ UTF-8ï¼‰
- éªŒè¯å¿…éœ€çš„æ•°æ®å—æ˜¯å¦å­˜åœ¨

#### 3. 3D å¯è§†åŒ–æ˜¾ç¤ºå¼‚å¸¸
- æ£€æŸ¥æ˜¾å¡é©±åŠ¨æ˜¯å¦æ”¯æŒ OpenGL 3.3+
- å°è¯•åˆ·æ–°é¡µé¢
- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

#### 4. æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥åº”ç”¨æ˜¯å¦æœ‰æ–‡ä»¶å†™å…¥æƒé™
- ç¡®ä¿ç£ç›˜ç©ºé—´å……è¶³
- å°è¯•é‡å¯åº”ç”¨

### æ—¥å¿—æŸ¥çœ‹
- å¼€å‘æ¨¡å¼ä¸‹ï¼Œæ—¥å¿—æ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸­
- ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œæ—¥å¿—ä¿å­˜åœ¨ç”¨æˆ·æ•°æ®ç›®å½•ä¸­

## è´¡çŒ®æŒ‡å—

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/new-feature`)
3. æäº¤æ›´æ”¹ (`git commit -am 'Add new feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/new-feature`)
5. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹å®‰å…¨å¼€å‘
- éµå¾ª ESLint å’Œ Prettier é…ç½®
- ä¸ºæ–°åŠŸèƒ½ç¼–å†™å•å…ƒæµ‹è¯•
- æ·»åŠ é€‚å½“çš„æ³¨é‡Šå’Œæ–‡æ¡£
- **TypeScript ç±»å‹ä½¿ç”¨**: å°½é‡ä½¿ç”¨ `unknown` è€Œä¸æ˜¯ `any` ç±»å‹ã€‚`unknown` ç±»å‹æ›´å®‰å…¨ï¼Œå¼ºåˆ¶åœ¨ä½¿ç”¨å‰è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œè€Œ `any` ä¼šç»•è¿‡ç±»å‹æ£€æŸ¥ã€‚åªæœ‰åœ¨ç¡®å®æ— æ³•ç¡®å®šç±»å‹ä¸”éœ€è¦çµæ´»æ€§çš„æƒ…å†µä¸‹æ‰ä½¿ç”¨ `any`ã€‚

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## æ›´æ–°æ—¥å¿—

### v1.0.0 (å¼€å‘ä¸­)
- âœ… åŸºç¡€ CIF æ–‡ä»¶è§£æåŠŸèƒ½
- âœ… 3D ç»“æ„å¯è§†åŒ–
- âœ… æ–‡ä»¶ä¸Šä¼ å’Œç®¡ç†
- âœ… æ•°æ®åº“å­˜å‚¨
- âœ… é”™è¯¯å¤„ç†å’ŒéªŒè¯
- ğŸš§ åº”ç”¨æ‰“åŒ…å’Œåˆ†å‘
- ğŸš§ ç”¨æˆ·æ–‡æ¡£å®Œå–„

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤ Issue: [GitHub Issues](link-to-issues)
- é‚®ç®±: your-email@example.com

---

**æ³¨æ„**: æœ¬é¡¹ç›®ç›®å‰å¤„äºå¼€å‘é˜¶æ®µï¼ŒæŸäº›åŠŸèƒ½å¯èƒ½è¿˜ä¸å®Œå–„ã€‚æ¬¢è¿è´¡çŒ®ä»£ç å’Œåé¦ˆé—®é¢˜ï¼