# Image-Mesh 用户指南

## 目录
1. [快速开始](#快速开始)
2. [界面介绍](#界面介绍)
3. [文件上传](#文件上传)
4. [结构可视化](#结构可视化)
5. [项目管理](#项目管理)
6. [高级功能](#高级功能)
7. [常见问题](#常见问题)

## 快速开始

### 首次使用
1. 启动 Image-Mesh 应用程序
2. 您将看到主界面，包含三个主要标签页：
   - 文件上传
   - 结构可视化  
   - 项目管理
3. 从"文件上传"开始您的第一个项目

### 基本工作流程
```
上传 CIF 文件 → 解析数据 → 3D 可视化 → 保存项目
```

## 界面介绍

### 主界面布局
- **顶部导航栏**: 包含应用标题和主要功能标签
- **侧边栏**: 显示当前项目的文件列表和状态
- **主内容区**: 根据选中的标签页显示相应功能
- **底部状态栏**: 显示应用状态和操作提示

### 标签页功能

#### 📁 文件上传
- 支持批量上传 CIF 和 TIFF 文件
- 实时显示文件解析状态
- 提供文件预览和编辑功能

#### 🔬 结构可视化
- 3D 交互式分子结构显示
- 可视化参数调整
- 图像导出功能

#### 📊 项目管理
- 项目列表和详细信息
- 分析记录管理
- 数据备份和恢复

## 文件上传

### 支持的文件格式

#### CIF 文件 (.cif)
- 标准晶体学信息文件格式
- 包含原子坐标、晶胞参数、空间群信息
- 支持分数坐标和笛卡尔坐标

#### TIFF 文件 (.tif, .tiff)
- 用于存储显微镜图像数据
- 支持多页 TIFF 文件
- 可与 CIF 文件关联存储

### 上传步骤

#### 方法一：拖拽上传
1. 直接将文件拖拽到上传区域
2. 系统自动识别文件类型
3. 等待解析完成

#### 方法二：点击选择
1. 点击"选择文件"按钮
2. 在文件对话框中选择要上传的文件
3. 可以按住 Ctrl/Cmd 键多选
4. 点击"确定"开始上传

### 文件解析过程

#### CIF 文件解析
应用会自动提取以下信息：
- **晶胞参数**: a, b, c, α, β, γ
- **空间群**: 对称性信息
- **原子坐标**: 所有原子的位置信息
- **原子属性**: 元素类型、占位率、温度因子等

#### 解析状态指示
- 🟡 **解析中**: 正在处理文件
- ✅ **解析成功**: 文件处理完成
- ❌ **解析失败**: 文件格式错误或数据不完整

### 错误处理

#### 常见解析错误
1. **文件格式错误**
   - 检查文件扩展名是否为 .cif
   - 确保文件内容符合 CIF 标准

2. **缺少必需数据**
   - 确保文件包含原子坐标信息
   - 检查晶胞参数是否完整

3. **编码问题**
   - 建议使用 UTF-8 编码
   - 避免使用特殊字符

## 结构可视化

### 3D 视图控制

#### 鼠标操作
- **左键拖拽**: 旋转分子结构
- **右键拖拽**: 平移视图位置
- **滚轮**: 缩放视图大小
- **双击**: 重置视角到默认位置

#### 触控板操作（笔记本）
- **双指拖拽**: 旋转结构
- **双指捏合**: 缩放视图
- **三指拖拽**: 平移视图

### 可视化选项

#### 原子显示设置
- **原子大小**: 调整原子球体的显示大小
- **原子颜色**: 按元素类型着色或统一颜色
- **标签显示**: 显示/隐藏原子标签

#### 化学键设置
- **化学键显示**: 显示或隐藏原子间的化学键
- **键半径**: 调整化学键的粗细
- **键长度阈值**: 设置化学键的最大长度

#### 视觉效果
- **光照强度**: 调整场景光照
- **背景颜色**: 更改视图背景色
- **透明度**: 调整原子和化学键的透明度

### 元素过滤

#### 显示/隐藏特定元素
1. 在右侧控制面板中找到"元素过滤"部分
2. 勾选或取消勾选元素前的复选框
3. 视图会实时更新显示

#### 批量操作
- **全选**: 显示所有元素
- **全不选**: 隐藏所有元素
- **反选**: 反转当前选择状态

### 导出功能

#### 图像导出
1. 调整好视角和显示设置
2. 点击"导出图像"按钮
3. 选择导出格式（PNG, JPG）
4. 设置图像分辨率
5. 选择保存位置

#### 数据导出
- **原子坐标**: 导出为 CSV 或 XYZ 格式
- **晶胞参数**: 导出为文本文件
- **完整数据**: 导出为 JSON 格式

## 项目管理

### 项目信息

#### 基本信息
- **项目名称**: 自定义项目名称
- **描述**: 项目的详细描述
- **创建时间**: 项目创建的时间戳
- **最后修改**: 项目最后更新时间

#### 文件关联
- **CIF 文件**: 主要的结构数据文件
- **TIFF 文件**: 关联的图像文件
- **分析数据**: 生成的分析结果

### 项目操作

#### 创建新项目
1. 在文件上传页面解析 CIF 文件
2. 系统自动创建新项目
3. 可以编辑项目名称和描述

#### 编辑项目
1. 在项目管理页面选择项目
2. 点击"编辑"按钮
3. 修改项目信息
4. 点击"保存"确认更改

#### 删除项目
1. 选择要删除的项目
2. 点击"删除"按钮
3. 在确认对话框中确认删除
4. **注意**: 删除操作不可恢复

### 分析记录

#### 查看分析记录
1. 选择项目
2. 在详情页面查看"分析记录"标签
3. 显示所有相关的分析结果

#### 添加分析记录
- 系统自动记录结构分析结果
- 支持手动添加自定义分析
- 可以附加分析参数和备注

## 高级功能

### 数据库管理

#### 备份数据库
1. 在设置页面找到"数据库管理"
2. 点击"备份数据库"
3. 选择备份位置
4. 等待备份完成

#### 数据库优化
- 定期运行数据库优化
- 清理无效数据
- 提高查询性能

### 高级解析选项

#### 自定义解析规则
- 设置特定的数据块名称
- 定义原子坐标格式
- 配置单位转换规则

#### 批量处理
- 支持批量解析多个 CIF 文件
- 自动识别文件类型和格式
- 批量导出解析结果

### 性能优化

#### 大文件处理
- 对于大型 CIF 文件，建议：
  - 分批加载原子数据
  - 使用简化的显示模式
  - 关闭不必要的视觉效果

#### 内存管理
- 定期清理缓存数据
- 关闭不必要的项目
- 重启应用释放内存

## 常见问题

### 技术问题

#### Q: 应用启动失败怎么办？
A: 
1. 检查系统是否满足最低要求
2. 确保有足够的内存和磁盘空间
3. 尝试以管理员身份运行
4. 检查是否有其他程序占用端口

#### Q: CIF 文件无法解析？
A:
1. 检查文件格式是否正确
2. 确保文件包含必需的数据块
3. 尝试用文本编辑器查看文件内容
4. 检查文件编码是否为 UTF-8

#### Q: 3D 视图显示异常？
A:
1. 更新显卡驱动程序
2. 检查是否支持 OpenGL 3.3+
3. 尝试降低显示质量
4. 重启应用程序

#### Q: 数据丢失怎么办？
A:
1. 检查数据库备份文件
2. 查看应用日志文件
3. 尝试从备份恢复数据
4. 联系技术支持

### 使用问题

#### Q: 如何提高可视化性能？
A:
1. 减少同时显示的原子数量
2. 关闭不必要的视觉效果
3. 使用简化的原子模型
4. 定期清理缓存

#### Q: 可以同时处理多个项目吗？
A:
- 可以，但建议一次专注一个项目
- 多个项目会增加内存使用
- 可以在不同项目间快速切换

#### Q: 如何分享可视化结果？
A:
1. 使用导出图像功能
2. 导出数据文件供他人使用
3. 录制屏幕操作视频
4. 生成项目报告

### 数据问题

#### Q: 支持哪些 CIF 格式变体？
A:
- 标准 IUC CIF 格式
- PDB 格式的 CIF 变体
- 自定义格式的部分支持
- 建议使用标准格式以确保兼容性

#### Q: 原子坐标精度如何处理？
A:
- 支持高精度坐标数据
- 自动处理单位转换
- 保持原始数据精度
- 可根据需要调整显示精度

## 快捷键参考

### 通用快捷键
- `Ctrl + O`: 打开文件
- `Ctrl + S`: 保存项目
- `Ctrl + Z`: 撤销操作
- `Ctrl + Y`: 重做操作
- `F5`: 刷新视图
- `Esc`: 取消当前操作

### 3D 视图快捷键
- `R`: 重置视角
- `F`: 适应屏幕
- `G`: 显示/隐藏网格
- `L`: 显示/隐藏标签
- `B`: 显示/隐藏化学键

## 技术支持

### 获取帮助
- 查看在线文档
- 提交技术支持请求
- 参与社区讨论
- 观看视频教程

### 反馈建议
- 通过应用内反馈功能
- 发送邮件至支持邮箱
- 在 GitHub 上提交 Issue
- 参与用户调研

---

**版本**: 1.0.0  
**更新日期**: 2024年  
**适用平台**: Windows, macOS, Linux